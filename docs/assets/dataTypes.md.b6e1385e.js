import{_ as s,c as a,o as e,a as t}from"./app.1edbf0b4.js";const u=JSON.parse('{"title":"Data Types","description":"","frontmatter":{},"headers":[{"level":2,"title":"Ranges","slug":"ranges","link":"#ranges","children":[]}],"relativePath":"dataTypes.md"}'),n={name:"dataTypes.md"},o=t(`<h1 id="data-types" tabindex="-1">Data Types <a class="header-anchor" href="#data-types" aria-hidden="true">#</a></h1><p>Mapping data types in Postgres to Typescript is not always trivial and unambiguous. You will probably want a <code>text</code> column to be represented by a <code>string</code> in Typescript. But what about numbers? Typescript, like Javascript, doesn&#39;t differentiate between integer types and floating point types. Per default, both kinds will map to <code>number</code>, but you should consider if that is what you want and need.</p><p>Note that the default Postgres adapter for Node (<a href="https://github.com/brianc/node-postgres" target="_blank" rel="noreferrer">node-postgres</a>) will return strings per default for many types. This means that you will need to parse them at some point. Depending on what your setup, that can happen in various places. You can look into the way it handles <a href="https://node-postgres.com/features/types" target="_blank" rel="noreferrer">data types</a>.</p><h2 id="ranges" tabindex="-1">Ranges <a class="header-anchor" href="#ranges" aria-hidden="true">#</a></h2><p>Kanel will, with the default configuration, turn Postgres ranges info Typescript tuples with the <code>min</code> and <code>max</code> values as the two entries. There are a few things to note about this.</p><p>Firstly, that doesn&#39;t actually fully describe a range as you lose information about whether the boundaries are considered inclusive or exclusive. If you want more comprehensive support, you might want to use the <a href="https://github.com/moll/js-strange" target="_blank" rel="noreferrer">stRange</a> package or some alternative.</p><p>Secondly, node-postgres will return strings for ranges like many other things. If you are using, say, the built-in <code>tsrange</code> type for timestamp ranges, you can configure the library to parse them to the default Kanel format with the following piece of code:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">types</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pg</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// This is the OID for tsrange.</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> TSRANGE_OID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3908</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">types</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setTypeParser</span><span style="color:#A6ACCD;">(TSRANGE_OID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">v</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(v)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">d</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#A6ACCD;">(d))</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>Look at the <a href="https://github.com/brianc/node-pg-types" target="_blank" rel="noreferrer">node-pg-types</a> docs for more information about type OID&#39;s.</p>`,9),p=[o];function l(r,c,i,y,d,h){return e(),a("div",null,p)}const A=s(n,[["render",l]]);export{u as __pageData,A as default};
